PHP
TYA
PHA

LDY #$03
LDA *$7F
CHECK CMP *$D0,Y
BEQ DONE
CMP #$00
BNE CONTINUE
STA *$D0,Y
CONTINUE DEY
CPY $#00
BNE CHECK

INC $0434


 

LDA $talked_to_this_guy
BNE ALREADY_CHECKED
INC $0434
LDA #$10
BNE DONE

ALREADY_CHECKED LDA #$FF

DONE 

PLA
TAY
PLP

RTS