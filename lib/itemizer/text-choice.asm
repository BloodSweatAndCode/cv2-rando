PHP

LDA *$7F
CLC
ROR A
ROR A
ROR A
ROR A
TAX



LDA *$7F
CMP #$10
BNE NORMAL
BIT *$D0
BNE REFUSE
LDA *$D0
ORA #$10
STA *$D0
BNE NORMAL
REFUSE LDA $9D40,X
STA *$00
LDA $9D41,X
STA *$01
; 0xDD50 in ROM
BNE DONE
NORMAL ASL A
TAX
DONE LDA $8B82,X
STA *$00
LDA $8B83,X
STA *$01

PLP
RTS